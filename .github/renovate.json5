{
  $schema: 'https://docs.renovatebot.com/renovate-schema.json',
  enabled: true,
  separateMajorMinor: false,
  extends: [
    'config:best-practices',
    ':gitSignOff',
    ':semanticCommits',
    ':disableVulnerabilityAlerts',
    ':prConcurrentLimit10', // Set a limit to avoid too many PRs, at least on the first run
    ':prHourlyLimitNone',
  ],
  timezone: 'Europe/London',
  labels: [
    'dependencies',
  ],
  postUpgradeTasks: {
    commands: [
      'make generate',
    ],
    executionMode: 'branch',
  },
  packageRules: [
    // Currently, there seems to be issues with permissions which doesn't allow Renovate to update actions.
    {
      groupName: 'GitHub Actions',
      matchManagers: [
        'github-actions',
      ],
      matchPackageNames: [
        '/.*/',
      ],
    },
    {
      groupName: 'Misc Go deps',
      matchManagers: [
        'gomod',
      ],
      matchPackageNames: [
        '/.*/',
      ],
    },
    {
      groupName: 'Kubernetes Go deps',
      matchManagers: [
        'gomod',
      ],
      matchPackageNames: [
        '/^sigs.k8s.io/',
        '/^k8s.io/',
      ],
    },
    {
      groupName: 'Cloud Go deps',
      matchManagers: [
        'gomod',
      ],
      matchPackageNames: [
        '/^github.com/akamai/',
        '/^github.com/aws/',
        '/^github.com/Azure/',
        '/^github.com/AzureAD/',
        '/^github.com/cloudflare/',
        '/^github.com/digitalocean/',
        '/^github.com/Venafi',
        '/^google.golang.org/api'
      ],
    },
    {
      groupName: 'golang.org/x deps',
      matchManagers: [
        'gomod',
      ],
      matchPackageNames: [
        '/^golang.org/x/',
      ],
      addLabels: ['skip-review'], // Adding label to allow PRs to automerge
    },
    {
      description: 'Disable all cert-manager related dependencies',
      matchManagers: [
        'gomod',
      ],
      matchPackageNames: [
        '/^github.com/cert-manager/',
      ],
      allowedVersions: '!/0.0.0/',
      enabled: false,
    },
  ],
  ignorePaths: [
    '**/vendor/**',
    '**/node_modules/**',
    '**/__tests__/**',
    // The following files are managed from makefile-modules, and should be ignored by Renovate in other projects.
    '.github/workflows/govulncheck.yaml',
    '.github/workflows/make-self-upgrade.yaml',
    '.github/dependabot.yaml',
  ],
  prBodyDefinitions: {
    Package: '{{depName}}',
  },
  prBodyColumns: [
    'Package',
    'Type',
    'Update',
    'Change',
    'References',
  ],
  prBodyNotes: [
    '/kind cleanup',
    '### Release Note\n```release-note\nNONE\n```',
    '**Note**: This PR was automatically created by Renovate Bot.',
    '',
  ],
}
